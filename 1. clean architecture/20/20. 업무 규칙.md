# 1. 엔티티

쉽게 설명하면 엔티티는 세부사항과 거리가 먼 순수한 객체이다. 엔티티는 자신 도메인 내에 있는 데이터만 책임진다.  

가령 은행의 업무 규칙 중 Loan(대출)을 나타내는 엔티티가 있다고 가정해보자.  

```java
loan.makePayment();
loan.estimate();
```

자신의 엔티티에 필요한 데이터와 순수한 비즈니스 로직, 즉 업무 규칙에 대해서만 책임진다. 웹, 네트워크, 프레임워크 등과는 완전히 분리되어 있다는 사실을 명심해야한다.  

이를 위반하는 대표적인 예가 웹개발이다. 웹 개발은 필연적으로 데이터베이스가 개입되기 때문에 사실 엔티티라고 부르는 것들도 데이터 객체에 불과한 형태로 쓰이는 것이 현실이다.  

다시 한 번 강조하지만 엔티티는 순수해야한다.  

# 2. 유스케이스

모든 업무 규칙이 엔티티처럼 순수하지는 않다. 왜냐하면 여러 업무들이 절차를 지니고 있고 복잡하게 서로 엮여있기 때문이다.  

이러한 것을 `유스케이스`라고 부른다. 쉽게 말해서 애플리케이션에 특화된 업무 규칙이라고 보면 된다.  

가령 다음과 같은 대출 절차를 생각해보자.  

```text
1. 대출 받으려는 사람의 신상을 조회한다.  
2. 신용 등급에 따라 대출 가능 여부가 결정된다.  
3. 신용도를 만족하면 고객 정보를 생성 후, 대출 견적을 뽑는다.
```

이를 `대출`에 대한 유스케이스로 볼 수 있고, 흔히 말하는 `Sevice Layer`가 이를 잘 표현한다고 볼 수 있다.  

코드로 이 절차를 표현해보자!  

```java
Person p = personReop.findOne(securityId);
CreditRate cr = p.getCreditRate();
bool possible = cr.isPossibleToGetLoan();
if (possible) {
    Customer c = GetCustomerUseCase.getCustomer(p);
    Loan loan = GetLoanUseCase.getLoan(c);
    LoanEstimation le = loan.getEstimate();
}
```

이런 비슷한 방식으로 표현할 수 있다.  

# 3. 요청 및 응답 모델

당연히 엔티티와 유스케이스는 업무 규칙과 업무 상세를 나타내므로 시스템에 의존적이여선 안되고 독립적인 형태여야한다.  

따라서 엔티티나 유스케이스가 시스템의 세부 사항에 대해서 알고 있다면 이는 잘못된 설계이다.  

경험적으로 봤을 때 보통은 이런 실수들이 일반적으로 저질러진다.  

보통 `서비스 레이어`혹은 `비즈니스 오브젝트`라고 알려진 것들의 코드를 보면 현실은 데이터베이스에 대한 트랜잭션 스크립트에 불과한 현실을 볼 수 있다.  

# 4. 결론

1. 엔티티는 순수해
2. 유스케이스는 덜 순수하지만 세부 사항에 오염되선 안돼

